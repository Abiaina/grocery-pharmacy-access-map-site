(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[374],{4932:function(e,t,s){Promise.resolve().then(s.bind(s,7990))},7990:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return n}});var i=s(7437),r=s(2265),a=s(2141);function n(){let[e,t]=(0,r.useState)(null),[s,n]=(0,r.useState)([]),[o,l]=(0,r.useState)(!0),[c,d]=(0,r.useState)(!1),[m,u]=(0,r.useState)({name:"",email:"",zipcode:"",message:""}),[g,h]=(0,r.useState)(!1),[p,x]=(0,r.useState)(null);(0,r.useEffect)(()=>{b()},[]);let b=async()=>{try{let{count:e,error:s}=await a.O.from("signatures").select("*",{count:"exact",head:!0}).eq("petition_id","b82acf03-e61f-4b3f-82bf-9db5f74340e5");s&&console.error("Error fetching signature count:",s),t({id:"b82acf03-e61f-4b3f-82bf-9db5f74340e5",title:"Restore Grocery & Pharmacy Access in Lake City (2023–2025 Closures)",description:"Over the past two years, Lake City has lost three pharmacies and one supermarket — leaving residents with growing gaps in access to essential services.\n\nWe're calling on the City of Seattle to:\n\n• Fund an interim pharmacy solution to restore medication access.\n\n• Establish a resident-centered task force to identify and guide long-term grocery and pharmacy options for our community.\n\nThis petition addresses the critical need for essential services in our neighborhood and calls for immediate action to restore access to groceries and medications that our community depends on.",goal:1e3,current_signatures:e||0,upvotes:0,downvotes:0,status:"ACTIVE",created_at:"2025-10-10T03:27:39.911387+00:00"}),await y()}catch(e){console.error("Error loading petition data:",e)}finally{l(!1)}},y=async()=>{try{let e=(await Promise.all([{id:"interim-pharmacy",title:"Interim Pharmacy Services",description:"Establish temporary pharmacy services at existing community health centers or partner locations to provide immediate medication access while longer-term solutions are developed."},{id:"mobile-pharmacy",title:"Mobile Pharmacy Services",description:"Deploy mobile pharmacy units to serve Lake City residents on a scheduled basis, providing prescription medications and basic health services at convenient community locations."},{id:"expand-foodbank",title:"Expand Foodbank",description:"Enhance existing food bank services in Lake City with expanded hours, mobile pantries, home delivery, and improved access to fresh produce and essential grocery items."},{id:"expand-farmers-market",title:"Expand Farmers Market & Add Indoor Support",description:"Enhance the existing Lake City Farmers Market with extended hours, indoor facilities, and additional vendors to provide more comprehensive food access including basic grocery items."},{id:"municipal-grocery",title:"Municipal Grocery Store",description:"Create a publicly-funded grocery store with integrated pharmacy services that provides affordable, healthy food options to Lake City residents."},{id:"coop",title:"Community Co-op Grocery",description:"Establish a community-owned cooperative grocery store similar to PCC Community Markets, providing high-quality food access with member ownership, community governance, and union representation."},{id:"expand-existing-stores",title:"Expand and Improve Existing Stores",description:"Provide support and resources to existing stores to expand their offerings and improve quality. Add pharmacy services and upgrade Grocery Outlet to full grocery status."},{id:"pitch-new-grocery",title:"Pitch New Grocery Business",description:"Attract new grocery retailers to Lake City through economic incentives, zoning changes, and community support, creating competition and improved access with union representation."},{id:"hub-spoke",title:"Hub-Spoke Model",description:"Create a centralized hub (former Fred Meyer) with multiple smaller spoke locations throughout Lake City, providing comprehensive grocery and pharmacy services with efficient distribution and union representation."}].map(async e=>{try{let{data:t,error:s}=await a.O.from("solution_votes").select("vote_type").eq("solution_id",e.id);if(s)return console.error("Error fetching votes for ".concat(e.id,":"),s),{...e,upvotes:0,downvotes:0};let i=(null==t?void 0:t.filter(e=>"upvote"===e.vote_type).length)||0,r=(null==t?void 0:t.filter(e=>"downvote"===e.vote_type).length)||0;return{...e,upvotes:i,downvotes:r}}catch(t){return console.error("Error fetching votes for ".concat(e.id,":"),t),{...e,upvotes:0,downvotes:0}}}))).sort((e,t)=>t.upvotes-t.downvotes-(e.upvotes-e.downvotes)).slice(0,3);n(e)}catch(e){console.error("Error loading top solutions:",e),n([{id:"interim-pharmacy",title:"Interim Pharmacy Services",description:"Establish temporary pharmacy services at existing community health centers.",upvotes:0,downvotes:0},{id:"mobile-pharmacy",title:"Mobile Pharmacy Services",description:"Deploy mobile pharmacy units to serve Lake City residents.",upvotes:0,downvotes:0},{id:"municipal-grocery",title:"Municipal Grocery Store",description:"Create a publicly-funded grocery store with integrated pharmacy services.",upvotes:0,downvotes:0}])}},v=async()=>{if(!m.name.trim()){x("Please enter your name to sign the petition");return}h(!0),x(null);try{let s=function(){try{let e=document.createElement("canvas"),t=e.getContext("2d");t&&(t.textBaseline="top",t.font="14px Arial",t.fillText("Browser fingerprint",2,2));let s=[navigator.userAgent,navigator.language,screen.width+"x"+screen.height,new Date().getTimezoneOffset(),e.toDataURL(),navigator.hardwareConcurrency||0,navigator.maxTouchPoints||0,navigator.platform,window.devicePixelRatio||1].join("|"),i=btoa(s).slice(0,16);return i.length<16&&(i=i.padEnd(16,"0")),i}catch(t){console.error("Fingerprint generation failed:",t);let e=btoa([navigator.userAgent,navigator.language,screen.width+"x"+screen.height].join("|")).slice(0,16);return e.length<16&&(e=e.padEnd(16,"0")),e}}(),{data:i,error:r}=await a.O.from("signatures").insert({petition_id:e.id,signer_name:m.name.trim(),email:m.email.trim()||null,zipcode:m.zipcode.trim()||null,message:m.message.trim()||null,fingerprint:s,verified:!1,is_public:!0}).select().single();if(r){console.error("Error signing petition:",r),"23505"===r.code?x("You have already signed this petition"):x("Failed to sign petition. Please try again.");return}let{count:n}=await a.O.from("signatures").select("*",{count:"exact",head:!0}).eq("petition_id",e.id);e&&t({...e,current_signatures:n||e.current_signatures+1}),u({name:"",email:"",zipcode:"",message:""}),d(!1),alert("Thank you ".concat(m.name," for signing the petition! Your signature has been recorded."))}catch(e){console.error("Error signing petition:",e),x("Failed to sign petition. Please try again.")}finally{h(!1)}};return o?(0,i.jsxs)("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[(0,i.jsx)("div",{className:"bg-white rounded-lg shadow-lg p-8 mb-8",children:(0,i.jsxs)("div",{className:"animate-pulse",children:[(0,i.jsx)("div",{className:"h-8 bg-gray-200 rounded mb-4 w-3/4"}),(0,i.jsx)("div",{className:"h-4 bg-gray-200 rounded mb-2"}),(0,i.jsx)("div",{className:"h-4 bg-gray-200 rounded mb-2 w-5/6"}),(0,i.jsx)("div",{className:"h-4 bg-gray-200 rounded mb-6 w-4/6"}),(0,i.jsx)("div",{className:"h-12 bg-gray-200 rounded mb-4"})]})}),(0,i.jsx)("div",{className:"bg-white rounded-lg shadow-lg p-8",children:(0,i.jsxs)("div",{className:"animate-pulse",children:[(0,i.jsx)("div",{className:"h-6 bg-gray-200 rounded mb-4 w-1/2"}),(0,i.jsxs)("div",{className:"space-y-3",children:[(0,i.jsx)("div",{className:"h-4 bg-gray-200 rounded"}),(0,i.jsx)("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),(0,i.jsx)("div",{className:"h-4 bg-gray-200 rounded w-5/6"})]})]})})]}):e?(0,i.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,i.jsxs)("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[(0,i.jsxs)("div",{className:"text-center mb-8",children:[(0,i.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Lake City Community Petition"}),(0,i.jsx)("p",{className:"text-lg text-gray-600 max-w-2xl mx-auto",children:"Join your neighbors in advocating for better grocery and pharmacy access in Lake City."})]}),(0,i.jsx)("div",{className:"bg-white rounded-lg shadow-lg border border-gray-200 mb-8",children:(0,i.jsxs)("div",{className:"p-8",children:[(0,i.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:e.title}),(0,i.jsx)("div",{className:"prose max-w-none mb-6",children:(0,i.jsx)("p",{className:"text-gray-700 leading-relaxed whitespace-pre-line",children:e.description})}),(0,i.jsx)("div",{className:"mb-6",children:c?(0,i.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-lg border border-gray-200",children:[(0,i.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Sign the Petition"}),(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Your Name *"}),(0,i.jsx)("input",{type:"text",value:m.name,onChange:e=>u({...m,name:e.target.value}),placeholder:"Enter your full name",className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",maxLength:100})]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email (optional)"}),(0,i.jsx)("input",{type:"email",value:m.email,onChange:e=>u({...m,email:e.target.value}),placeholder:"your@email.com",className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Zipcode (optional)"}),(0,i.jsx)("input",{type:"text",value:m.zipcode,onChange:e=>u({...m,zipcode:e.target.value}),placeholder:"98125",className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",maxLength:10})]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Message (optional)"}),(0,i.jsx)("textarea",{value:m.message,onChange:e=>u({...m,message:e.target.value}),placeholder:"Any thoughts or suggestions?",className:"w-full p-3 border border-gray-300 rounded-lg resize-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:3,maxLength:500}),(0,i.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:[m.message.length,"/500 characters"]})]}),p&&(0,i.jsx)("div",{className:"text-red-600 text-sm bg-red-50 p-3 rounded border border-red-200",children:p}),(0,i.jsxs)("div",{className:"flex gap-3",children:[(0,i.jsx)("button",{onClick:v,disabled:g||!m.name.trim(),className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:g?"Signing...":"Sign Petition"}),(0,i.jsx)("button",{onClick:()=>{d(!1),u({name:"",email:"",zipcode:"",message:""}),x(null)},className:"px-6 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors",children:"Cancel"})]}),(0,i.jsx)("div",{className:"text-xs text-gray-500",children:"Anonymous signing • No signup required • Your information is secure"})]})]}):(0,i.jsx)("button",{onClick:()=>d(!0),className:"w-full py-4 px-8 bg-blue-600 hover:bg-blue-700 text-white font-bold text-xl rounded-lg shadow-lg hover:shadow-xl transition-all duration-200 transform hover:scale-105",children:(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsx)("div",{className:"mb-1",children:"Sign Petition"}),(0,i.jsxs)("div",{className:"text-sm font-normal opacity-90",children:["Join ",e.current_signatures," neighbors supporting this cause"]})]})})}),(0,i.jsxs)("div",{className:"mb-6",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,i.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Signatures"}),(0,i.jsxs)("span",{className:"text-sm text-gray-500",children:[e.current_signatures," / ",e.goal]})]}),(0,i.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,i.jsx)("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:"".concat(Math.min(e.current_signatures/e.goal*100,100),"%")}})})]})]})}),(0,i.jsx)("div",{className:"bg-white rounded-lg shadow-lg border border-gray-200",children:(0,i.jsxs)("div",{className:"p-8",children:[(0,i.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-6 text-center",children:"Community's Top Solutions"}),(0,i.jsx)("div",{className:"space-y-4",children:s.map((e,t)=>(0,i.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,i.jsx)("div",{className:"flex items-start justify-between mb-2",children:(0,i.jsx)("h3",{className:"font-semibold text-gray-900",children:e.title})}),(0,i.jsx)("p",{className:"text-gray-600 text-sm mb-3",children:e.description}),(0,i.jsxs)("div",{className:"flex items-center gap-4 text-sm",children:[(0,i.jsxs)("span",{className:"text-green-600 flex items-center gap-1",children:[(0,i.jsx)("span",{className:"text-lg",children:"↑"})," ",e.upvotes]}),(0,i.jsxs)("span",{className:"text-red-600 flex items-center gap-1",children:[(0,i.jsx)("span",{className:"text-lg",children:"↓"})," ",e.downvotes]})]})]},e.id))}),(0,i.jsx)("div",{className:"text-center mt-6",children:(0,i.jsx)("a",{href:"/solutions",className:"text-blue-600 hover:text-blue-700 font-medium",children:"View All Solutions →"})})]})})]})}):(0,i.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Petition Not Found"}),(0,i.jsx)("p",{className:"text-gray-600 mb-4",children:"The Lake City petition could not be loaded."}),(0,i.jsx)("p",{className:"text-sm text-gray-500 mb-4",children:"Check the browser console for error details."}),(0,i.jsx)("button",{onClick:b,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:"Try Again"})]})})}},2141:function(e,t,s){"use strict";s.d(t,{O:function(){return n}});var i=s(9683);let r="https://rnnzekyvmaibmewzxypa.supabase.co/",a="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJubnpla3l2bWFpYm1ld3p4eXBhIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTk5OTE0NzUsImV4cCI6MjA3NTU2NzQ3NX0.3ZwEnR0up8Ma7KExtXFzTP0xFV-MocwsScjiSbYCVCI";if(console.log("Supabase config check:",{url:r?"Present":"Missing",key:a?"Present":"Missing",nodeEnv:"production"}),!r||!a)throw console.error("Missing Supabase environment variables"),Error("Missing required Supabase environment variables: NEXT_PUBLIC_SUPABASE_URL and NEXT_PUBLIC_SUPABASE_ANON_KEY");let n=(0,i.eI)(r,a,{auth:{persistSession:!1}})}},function(e){e.O(0,[683,971,117,744],function(){return e(e.s=4932)}),_N_E=e.O()}]);