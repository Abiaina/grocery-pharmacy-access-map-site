"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[154],{5553:function(e,t,n){n.d(t,{Z:function(){return o}});var a=n(7437),r=n(2265),i=n(8685);function o(e){let{images:t,autoRotateInterval:n=i.DP.CAROUSEL_AUTO_ROTATE_INTERVAL,showIndicators:o=!0,showOverlay:s=!0,height:l="h-[400px] md:h-[500px]",className:c=""}=e,[u,g]=(0,r.useState)(0);return(0,r.useEffect)(()=>{if(t.length<=1)return;let e=setInterval(()=>{g(e=>(e+1)%t.length)},n);return()=>clearInterval(e)},[t.length,n]),(0,a.jsxs)("div",{className:"relative ".concat(l," rounded-2xl overflow-hidden shadow-lg border-2 border-beige-dark group ").concat(c),role:"region","aria-label":"Image carousel",children:[t.map((e,t)=>(0,a.jsxs)("div",{className:"absolute inset-0 transition-opacity duration-1000 ".concat(t===u?"opacity-100":"opacity-0"),"aria-hidden":t!==u,children:[(0,a.jsx)("img",{src:e.src,alt:e.alt,className:"w-full h-full object-cover",style:{objectPosition:e.objectPosition||"center"}}),s&&(e.label||e.year||e.caption)&&(0,a.jsx)("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/70 to-transparent p-6",children:(0,a.jsxs)("div",{className:"text-white",children:[e.label&&(0,a.jsx)("h3",{className:"text-2xl md:text-3xl font-bold mb-2",children:e.label}),e.year&&(0,a.jsx)("p",{className:"text-lg md:text-xl",children:e.year}),e.caption&&(0,a.jsx)("p",{className:"text-xl md:text-2xl font-bold drop-shadow-lg",children:e.caption})]})})]},t)),o&&t.length>1&&(0,a.jsx)("div",{className:"absolute bottom-4 right-4 flex gap-2 z-10 opacity-30 group-hover:opacity-100 focus-within:opacity-100 transition-opacity",children:t.map((e,n)=>(0,a.jsx)("button",{onClick:()=>g(n),className:"rounded-full transition-all min-h-[44px] min-w-[44px] flex items-center justify-center focus:opacity-100 ".concat(n===u?"bg-white":"bg-white/50"),"aria-label":"Go to slide ".concat(n+1," of ").concat(t.length),"aria-current":n===u?"true":"false",children:(0,a.jsx)("span",{className:"rounded-full transition-all ".concat(n===u?"bg-white w-8 h-2":"bg-white/50 w-2 h-2"),"aria-hidden":"true"})},n))})]})}},8685:function(e,t,n){n.d(t,{DP:function(){return a},RZ:function(){return s},at:function(){return i},fp:function(){return r},ji:function(){return o}});let a={CAROUSEL_AUTO_ROTATE_INTERVAL:5e3,SCROLL_DELAY:100},r={SIGNATURE:{MAX_REQUESTS:5,WINDOW_MS:3e5},SURVEY:{MAX_REQUESTS:5,WINDOW_MS:3e5},SURVEY_SUBMISSION:{MAX_REQUESTS:3,WINDOW_MS:36e5}},i={COMMENT:{MIN_LENGTH:10,MAX_LENGTH:1e3},SURVEY_COMMENT:{MIN_LENGTH:5,MAX_LENGTH:2e3},NAME:{MIN_LENGTH:2,MAX_LENGTH:100},EMAIL:{MAX_LENGTH:254},ZIPCODE:{MAX_LENGTH:10}},o={SIGNATURES:"signatures",SOLUTION_VOTES:"solution_votes",SURVEY_RESPONSES:"survey_responses",SURVEY_COMMENTS:"survey_comments"},s={DATABASE_UNAVAILABLE:"Database connection unavailable. Please try again later.",GENERIC_ERROR:"An unexpected error occurred. Please try again.",RATE_LIMIT_EXCEEDED:"Rate limit exceeded. Please wait before trying again.",VALIDATION_FAILED:"Please check your input and try again."}},8063:function(e,t,n){n.d(t,{H:function(){return o},Iu:function(){return s},wE:function(){return r}});var a,r,i=n(8685);function o(e,t){arguments.length>2&&void 0!==arguments[2]&&arguments[2],e instanceof Error?e.message:String(e),e instanceof Error&&e.stack,new Date().toISOString()}function s(e){return"object"==typeof e&&null!==e&&"message"in e&&"string"==typeof e.message?(o(e,"Supabase operation failed","error"),e.message||i.RZ.DATABASE_UNAVAILABLE):(o(e,"Unknown error in Supabase operation","error"),i.RZ.GENERIC_ERROR)}(a=r||(r={})).ERROR="error",a.WARN="warn",a.INFO="info"},9637:function(e,t,n){n.d(t,{Dn:function(){return c},Lm:function(){return g},Vl:function(){return r},dH:function(){return u}});var a=n(8685);function r(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e||"string"!=typeof e)return{valid:!1,message:"Comment cannot be empty"};let n=e.trim(),r=t?a.at.SURVEY_COMMENT:a.at.COMMENT;if(n.length<r.MIN_LENGTH)return{valid:!1,message:"Comment must be at least ".concat(r.MIN_LENGTH," characters long")};if(n.length>r.MAX_LENGTH)return{valid:!1,message:"Comment must be less than ".concat(r.MAX_LENGTH," characters")};let i=[/(http|https|www\.)/gi,/[A-Z]{15,}/g,/(.)\1{8,}/g];for(let e of(t||i.push(/\b(buy|sell|free|money|cash|click|here|now)\b/gi,/(.)\1{5,}/g),i))if(e.test(n))return{valid:!1,message:"Comment contains suspicious content"};return{valid:!0,sanitized:function(e){if("string"!=typeof e)return"";let t=e.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F]/g,"");return(t=(t=(t=(t=(t=(t=(t=t.replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,"")).replace(/javascript:/gi,"")).replace(/vbscript:/gi,"")).replace(/on\w+\s*=/gi,"")).replace(/(';)|(\-\-)|(\s+or\s+)|(\s+and\s+)/gi,"")).replace(/[ \t]+/g," ")).replace(/\n{3,}/g,"\n\n")).trim()}(n)}}class i{isAllowed(e){let t=Date.now(),n=(this.attempts.get(e)||[]).filter(e=>t-e<this.windowMs);return!(n.length>=this.maxAttempts)&&(n.push(t),this.attempts.set(e,n),!0)}getRemainingTime(e){let t=this.attempts.get(e)||[];return t.length<this.maxAttempts?0:Math.max(0,this.windowMs-(Date.now()-Math.min(...t)))}constructor(e=5,t=6e4){this.attempts=new Map,this.maxAttempts=e,this.windowMs=t}}let o=new i(3,6e4),s=new i(10,6e4),l=new i(5,3e5);function c(e,t,n){if("string"==typeof t){let n;switch(e){case"comment":n=o;break;case"vote":n=s;break;case"signature":n=l;break;default:return{allowed:!1}}let a=n.isAllowed(t),r=a?0:n.getRemainingTime(t);return{allowed:a,remainingTime:r}}return new Promise(r=>{try{let i="rate_limit_".concat(e),o=Date.now(),s=localStorage.getItem(i),l=[];if(s)try{let e=JSON.parse(s);l=Array.isArray(e)?e:[]}catch(e){l=[]}let c="number"==typeof t?t:"survey_submission"===e?a.fp.SURVEY_SUBMISSION.MAX_REQUESTS:a.fp.SIGNATURE.MAX_REQUESTS,u=n||("survey_submission"===e?a.fp.SURVEY_SUBMISSION.WINDOW_MS:a.fp.SIGNATURE.WINDOW_MS),g=l.filter(e=>o-e<u);if(g.length>=c){r(!1);return}g.push(o),localStorage.setItem(i,JSON.stringify(g)),r(!0)}catch(e){console.error("Rate limit check error:",e),r(!0)}})}function u(e){let t=Math.ceil(e/1e3);if(t<60)return"".concat(t," seconds");let n=Math.ceil(t/60);return"".concat(n," minute").concat(1!==n?"s":"")}function g(){try{let e=localStorage.getItem("voting_session_id");if(!e){let t=navigator.userAgent+navigator.language+screen.width+"x"+screen.height;e=btoa(t+Math.random().toString(36)+Date.now().toString()).slice(0,20),localStorage.setItem("voting_session_id",e)}let t=[navigator.userAgent,navigator.language,screen.width+"x"+screen.height,new Date().getTimezoneOffset(),navigator.hardwareConcurrency||0,navigator.maxTouchPoints||0,navigator.platform,window.devicePixelRatio||1,navigator.cookieEnabled?"1":"0",navigator.doNotTrack||"0",e,Math.floor(Date.now()/864e5),navigator.vendor,navigator.product,navigator.appVersion,window.location.hostname,performance.now().toString()],n=document.createElement("canvas"),a=n.getContext("2d");a&&(a.textBaseline="top",a.font="14px Arial",a.fillText("Browser fingerprint",2,2),t.push(n.toDataURL()));let r=t.join("|"),i=0;for(let e=0;e<r.length;e++){let t=r.charCodeAt(e);i=(i<<5)-i+t,i&=i}let o=Math.abs(i).toString(36);return o.length<16?o=o.padEnd(16,"0"):o.length>16&&(o=o.slice(0,16)),o}catch(r){console.error("Secure fingerprint generation failed:",r);let e=localStorage.getItem("voting_session_id");e||(e=btoa(navigator.userAgent+navigator.language+screen.width+"x"+screen.height+Math.random().toString(36)+Date.now().toString()).slice(0,20),localStorage.setItem("voting_session_id",e));let t=[navigator.userAgent,navigator.language,screen.width+"x"+screen.height,e,Math.floor(Date.now()/864e5),navigator.vendor,navigator.product,window.location.hostname,performance.now().toString()].join("|"),n=0;for(let e=0;e<t.length;e++)n=(n<<5)-n+t.charCodeAt(e),n&=n;let a=Math.abs(n).toString(36);return a.length<16?a=a.padEnd(16,"0"):a.length>16&&(a=a.slice(0,16)),a}}new i(3,36e5)},2141:function(e,t,n){n.d(t,{O:function(){return s}});var a=n(1545);let r="https://rnnzekyvmaibmewzxypa.supabase.co/",i="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJubnpla3l2bWFpYm1ld3p4eXBhIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTk5OTE0NzUsImV4cCI6MjA3NTU2NzQ3NX0.3ZwEnR0up8Ma7KExtXFzTP0xFV-MocwsScjiSbYCVCI";console.log("Supabase config check:",{url:r?"Present":"Missing",key:i?"Present":"Missing",nodeEnv:"production"});let o=null;r&&i?o=(0,a.eI)(r,i,{auth:{persistSession:!1}}):console.warn("Supabase environment variables not available - client will be null");let s=o},4508:function(e,t,n){n.d(t,{b:function(){return a}});function a(){return""}}}]);