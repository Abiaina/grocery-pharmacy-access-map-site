(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8405:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return M}});var a,s,n=r(7437),o=r(2265),i=r(759),l=r.n(i);function c(e,t){return Object.freeze({...e,...t})}r(5046);let d=(0,o.createContext)(null),u=d.Provider;function p(){let e=(0,o.useContext)(d);if(null==e)throw Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return e}function m(){return(m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}).apply(this,arguments)}let h=(0,o.forwardRef)(function(e,t){let{bounds:r,boundsOptions:a,center:s,children:n,className:l,id:c,placeholder:d,style:p,whenReady:h,zoom:y,...f}=e,[g]=(0,o.useState)({className:l,id:c,style:p}),[_,b]=(0,o.useState)(null);(0,o.useImperativeHandle)(t,()=>{var e;return null!==(e=null==_?void 0:_.map)&&void 0!==e?e:null},[_]);let x=(0,o.useCallback)(e=>{if(null!==e&&null===_){let t=new i.Map(e,f);null!=s&&null!=y?t.setView(s,y):null!=r&&t.fitBounds(r,a),null!=h&&t.whenReady(h),b(Object.freeze({__version:1,map:t}))}},[]);(0,o.useEffect)(()=>()=>{null==_||_.map.remove()},[_]);let N=_?o.createElement(u,{value:_},n):null!=d?d:null;return o.createElement("div",m({},g,{ref:x}),N)});var y=r(4887);function f(e,t,r){return Object.freeze({instance:e,context:t,container:r})}function g(e,t){return null==t?function(t,r){let a=(0,o.useRef)();return a.current||(a.current=e(t,r)),a}:function(r,a){let s=(0,o.useRef)();s.current||(s.current=e(r,a));let n=(0,o.useRef)(r),{instance:i}=s.current;return(0,o.useEffect)(function(){n.current!==r&&(t(i,r,n.current),n.current=r)},[i,r,a]),s}}function _(e,t){let r=(0,o.useRef)(t);(0,o.useEffect)(function(){t!==r.current&&null!=e.attributionControl&&(null!=r.current&&e.attributionControl.removeAttribution(r.current),null!=t&&e.attributionControl.addAttribution(t)),r.current=t},[e,t])}function b(e,t){let r=(0,o.useRef)();(0,o.useEffect)(function(){return null!=t&&e.instance.on(t),r.current=t,function(){null!=r.current&&e.instance.off(r.current),r.current=null}},[e,t])}function x(e,t){let r=e.pane??t.pane;return r?{...e,pane:r}:e}function N(e,t){(0,o.useEffect)(function(){return(t.layerContainer??t.map).addLayer(e.instance),function(){t.layerContainer?.removeLayer(e.instance),t.map.removeLayer(e.instance)}},[t,e])}function S(e,t){var r,a;return r=g(e),a=function(e,a){let s=p(),n=r(x(e,s),s);return _(s.map,e.attribution),b(n.current,e.eventHandlers),t(n.current,s,e,a),n},(0,o.forwardRef)(function(e,t){let[r,s]=(0,o.useState)(!1),{instance:n}=a(e,s).current;(0,o.useImperativeHandle)(t,()=>n),(0,o.useEffect)(function(){r&&n.update()},[n,r,e.children]);let i=n._contentNode;return i?(0,y.createPortal)(e.children,i):null})}function k(e,t){var r,a;return r=g(e,t),a=function(e){let t=p(),a=r(x(e,t),t);return b(a.current,e.eventHandlers),N(a.current,t),function(e,t){let r=(0,o.useRef)();(0,o.useEffect)(function(){if(t.pathOptions!==r.current){let a=t.pathOptions??{};e.instance.setStyle(a),r.current=a}},[e,t])}(a.current,e),a},(0,o.forwardRef)(function(e,t){let{instance:r,context:s}=a(e).current;return(0,o.useImperativeHandle)(t,()=>r),null==e.children?null:o.createElement(u,{value:s},e.children)})}let v=(a=g(function(e,t){let{url:r,...a}=e;return f(new i.TileLayer(r,x(a,t)),t)},function(e,t,r){!function(e,t,r){let{opacity:a,zIndex:s}=t;null!=a&&a!==r.opacity&&e.setOpacity(a),null!=s&&s!==r.zIndex&&e.setZIndex(s)}(e,t,r);let{url:a}=t;null!=a&&a!==r.url&&e.setUrl(a)}),s=function(e){let t=p(),r=a(x(e,t),t);return _(t.map,e.attribution),b(r.current,e.eventHandlers),N(r.current,t),r},(0,o.forwardRef)(function(e,t){let{instance:r}=s(e).current;return(0,o.useImperativeHandle)(t,()=>r),null}));function j(e,t,r){t.center!==r.center&&e.setLatLng(t.center),null!=t.radius&&t.radius!==r.radius&&e.setRadius(t.radius)}let C=k(function(e,t){let{center:r,children:a,...s}=e,n=new i.CircleMarker(r,s);return f(n,c(t,{overlayContainer:n}))},j),w=S(function(e,t){return f(new i.Tooltip(e,t.overlayContainer),t)},function(e,t,r,a){let{position:s}=r;(0,o.useEffect)(function(){let r=t.overlayContainer;if(null==r)return;let{instance:n}=e,o=e=>{e.tooltip===n&&(null!=s&&n.setLatLng(s),n.update(),a(!0))},i=e=>{e.tooltip===n&&a(!1)};return r.on({tooltipopen:o,tooltipclose:i}),r.bindTooltip(n),function(){r.off({tooltipopen:o,tooltipclose:i}),null!=r._map&&r.unbindTooltip()}},[e,t,a,s])}),A=S(function(e,t){return f(new i.Popup(e,t.overlayContainer),t)},function(e,t,r,a){let{position:s}=r;(0,o.useEffect)(function(){let{instance:r}=e;function n(e){e.popup===r&&(r.update(),a(!0))}function o(e){e.popup===r&&a(!1)}return t.map.on({popupopen:n,popupclose:o}),null==t.overlayContainer?(null!=s&&r.setLatLng(s),r.openOn(t.map)):t.overlayContainer.bindPopup(r),function(){var e;t.map.off({popupopen:n,popupclose:o}),null===(e=t.overlayContainer)||void 0===e||e.unbindPopup(),t.map.removeLayer(r)}},[e,t,a,s])}),L=k(function(e,t){let{positions:r,...a}=e,s=new i.Polygon(r,a);return f(s,c(t,{overlayContainer:s}))},function(e,t,r){t.positions!==r.positions&&e.setLatLngs(t.positions)}),P=k(function(e,t){let{center:r,children:a,...s}=e,n=new i.Circle(r,s);return f(n,c(t,{overlayContainer:n}))},j);var W=JSON.parse('{"type":"FeatureCollection","features":[{"type":"Feature","properties":{"id":"LC001","name":"Fred Meyer (Lake City)","address":"13000 Lake City Way NE, Seattle, WA 98125","coordinates":[-122.291963,47.724082]},"geometry":{"type":"Point","coordinates":[-122.291963,47.724082]}},{"type":"Feature","properties":{"id":"LC002","name":"QFC - North Seattle (NE 145th St)","address":"1531 NE 145th St, Seattle, WA 98155","coordinates":[-122.3105,47.73335]},"geometry":{"type":"Point","coordinates":[-122.3105,47.73335]}},{"type":"Feature","properties":{"id":"LC003","name":"QFC - Northgate (Roosevelt Way NE)","address":"11100 Roosevelt Way NE, Seattle, WA 98125","coordinates":[-122.317275,47.709396]},"geometry":{"type":"Point","coordinates":[-122.317275,47.709396]}},{"type":"Feature","properties":{"id":"LC004","name":"Safeway (15th Ave NE)","address":"12318 15th Ave NE, Seattle, WA 98125","coordinates":[-122.313,47.719]},"geometry":{"type":"Point","coordinates":[-122.313,47.719]}},{"type":"Feature","properties":{"id":"LC005","name":"Walgreens (Northgate Way @ Roosevelt)","address":"859 NE Northgate Way, Seattle, WA 98125","coordinates":[-122.319,47.709]},"geometry":{"type":"Point","coordinates":[-122.319,47.709]}},{"type":"Feature","properties":{"id":"LC006","name":"Sprouts Farmers Market (Aurora)","address":"13010 Aurora Ave N, Seattle, WA 98133","coordinates":[-122.33980785594574,47.724551251128496]},"geometry":{"type":"Point","coordinates":[-122.33980785594574,47.724551251128496]}},{"type":"Feature","properties":{"id":"LC007","name":"Saar\'s Oak Tree Super Saver Foods","address":"10008 Aurora Ave N, Seattle, WA 98133","coordinates":[-122.33655095197682,47.703455112319304]},"geometry":{"type":"Point","coordinates":[-122.33655095197682,47.703455112319304]}},{"type":"Feature","properties":{"id":"LC008","name":"Grocery Outlet","address":"3020 NE 127th St, Seattle, WA 98125","coordinates":[-122.29498,47.72178]},"geometry":{"type":"Point","coordinates":[-122.29498,47.72178]}},{"type":"Feature","properties":{"id":"LC009","name":"City Grocery","address":"13737 Lake City Way NE, Seattle, WA 98125","coordinates":[-122.29003071843383,47.73007627022229]},"geometry":{"type":"Point","coordinates":[-122.29003071843383,47.73007627022229]}},{"type":"Feature","properties":{"id":"LC010","name":"Goodies Mediterranean Market","address":"13721 Lake City Way NE, Seattle, WA 98125","coordinates":[-122.29453682939305,47.730119569138076]},"geometry":{"type":"Point","coordinates":[-122.29453682939305,47.730119569138076]}},{"type":"Feature","properties":{"id":"LC011","name":"Kilimanjaro Market","address":"12714 Lake City Way NE, Seattle, WA 98125","coordinates":[-122.29354977657114,47.721949886293984]},"geometry":{"type":"Point","coordinates":[-122.29354977657114,47.721949886293984]}},{"type":"Feature","properties":{"id":"LC012","name":"Nazreth Market","address":"12322 Lake City Way NE, Seattle, WA 98125","coordinates":[-122.29372143794382,47.718716301042605]},"geometry":{"type":"Point","coordinates":[-122.29372143794382,47.718716301042605]}},{"type":"Feature","properties":{"id":"LC013","name":"Lake City Library","address":"12501 28th Ave NE, Seattle, WA 98125","coordinates":[-122.297,47.7208]},"geometry":{"type":"Point","coordinates":[-122.297,47.7208]}},{"type":"Feature","properties":{"id":"LC014","name":"Neighborcare Health Center","address":"12721 30th Ave NE, Seattle, WA 98125","coordinates":[-122.295,47.72]},"geometry":{"type":"Point","coordinates":[-122.295,47.72]}},{"type":"Feature","properties":{"id":"LC015","name":"North Seattle Public Health Dental","address":"12359 Lake City Way NE, Seattle, WA 98125","coordinates":[-122.29482301465367,47.71912903122116]},"geometry":{"type":"Point","coordinates":[-122.29482301465367,47.71912903122116]}},{"type":"Feature","properties":{"id":"LC016","name":"Former Bartell Drugs Building","address":"3018 NE 125th St, Seattle, WA 98125","coordinates":[-122.298,47.722]},"geometry":{"type":"Point","coordinates":[-122.298,47.722]}},{"type":"Feature","properties":{"id":"LC017","name":"Former Bank Site","address":"2825 NE 125th St, Seattle, WA 98125","coordinates":[-122.29482301465367,47.71912903122116]},"geometry":{"type":"Point","coordinates":[-122.29482301465367,47.71912903122116]}},{"type":"Feature","properties":{"id":"LC018","name":"Bartell Drugs (Lake City)","address":"3018 NE 125th St, Seattle, WA 98125","coordinates":[-122.2956250619695,47.71968596554774]},"geometry":{"type":"Point","coordinates":[-122.2956250619695,47.71968596554774]}},{"type":"Feature","properties":{"id":"LC019","name":"Walgreens (Lake City Way)","address":"14352 Lake City Way NE, Seattle, WA 98125","coordinates":[-122.29194719450025,47.73363925901361]},"geometry":{"type":"Point","coordinates":[-122.29194719450025,47.73363925901361]}},{"type":"Feature","properties":{"id":"LC020","name":"Target (Northgate)","address":"302 NE Northgate Way, Seattle, WA 98125","coordinates":[-122.32497614494788,47.70890478849319]},"geometry":{"type":"Point","coordinates":[-122.32497614494788,47.70890478849319]}}]}'),F=JSON.parse('{"sites":[{"id":"LC001","name":"Fred Meyer (Lake City)","address":"13000 Lake City Way NE, Seattle, WA 98125","coordinates":[-122.291963,47.724082],"usda_category":{"code":"SM","name":"Supermarket","source":"USDA SNAP Retailer Store Type Definitions (2025)"},"has_pharmacy":true,"status":"closed","is_potential_site":false,"closed_date":"Oct 2025","notes":"Large supermarket with full service departments (butcher, bakery, pharmacy). Provides comprehensive fresh food access."},{"id":"LC002","name":"QFC - North Seattle (NE 145th St)","address":"1531 NE 145th St, Seattle, WA 98155","coordinates":[-122.3105,47.73335],"usda_category":{"code":"SM","name":"Supermarket","source":"USDA SNAP Retailer Store Type Definitions (2025)"},"has_pharmacy":true,"status":"open","is_potential_site":false,"closed_date":null,"notes":"Full-line supermarket with in-store pharmacy"},{"id":"LC003","name":"QFC - Northgate (Roosevelt Way NE)","address":"11100 Roosevelt Way NE, Seattle, WA 98125","coordinates":[-122.317275,47.709396],"usda_category":{"code":"SM","name":"Supermarket","source":"USDA SNAP Retailer Store Type Definitions (2025)"},"has_pharmacy":true,"status":"open","is_potential_site":false,"closed_date":null,"notes":"Full-line supermarket with in-store pharmacy"},{"id":"LC004","name":"Safeway (15th Ave NE)","address":"12318 15th Ave NE, Seattle, WA 98125","coordinates":[-122.313,47.719],"usda_category":{"code":"SM","name":"Supermarket","source":"USDA SNAP Retailer Store Type Definitions (2025)"},"has_pharmacy":true,"status":"open","is_potential_site":false,"closed_date":null,"notes":"Full-line supermarket with in-store pharmacy (approx coords)"},{"id":"LC005","name":"Walgreens (Northgate Way @ Roosevelt)","address":"859 NE Northgate Way, Seattle, WA 98125","coordinates":[-122.319,47.709],"usda_category":{"code":"PH","name":"Pharmacy","source":"USDA SNAP Retailer Store Type Definitions (2025)"},"has_pharmacy":true,"status":"open","is_potential_site":false,"closed_date":null,"notes":"Pharmacy with prescription services (approx coords)"},{"id":"LC006","name":"Sprouts Farmers Market (Aurora)","address":"13010 Aurora Ave N, Seattle, WA 98133","coordinates":[-122.33980785594574,47.724551251128496],"usda_category":{"code":"LG","name":"Large Grocery","source":"USDA SNAP Retailer Store Type Definitions (2025)"},"has_pharmacy":false,"status":"open","is_potential_site":false,"closed_date":null,"notes":"Natural foods supermarket with fresh produce and organic options"},{"id":"LC007","name":"Saar\'s Oak Tree Super Saver Foods","address":"10008 Aurora Ave N, Seattle, WA 98133","coordinates":[-122.33655095197682,47.703455112319304],"usda_category":{"code":"LG","name":"Large Grocery","source":"USDA SNAP Retailer Store Type Definitions (2025)"},"has_pharmacy":false,"status":"open","is_potential_site":false,"closed_date":null,"notes":"Full-line supermarket with competitive pricing"},{"id":"LC008","name":"Grocery Outlet","address":"3020 NE 127th St, Seattle, WA 98125","coordinates":[-122.29498,47.72178],"usda_category":{"code":"SG","name":"Small Grocery","source":"USDA SNAP Retailer Store Type Definitions (2025)"},"has_pharmacy":false,"status":"open","is_potential_site":false,"closed_date":null,"notes":"Discount grocery store with limited fresh food selection and often soon-to-expire items"},{"id":"LC009","name":"City Grocery","address":"13737 Lake City Way NE, Seattle, WA 98125","coordinates":[-122.29003071843383,47.73007627022229],"usda_category":{"code":"SG","name":"Small Grocery","source":"USDA SNAP Retailer Store Type Definitions (2025)"},"has_pharmacy":false,"status":"open","is_potential_site":false,"closed_date":null,"notes":"Small independent grocer; limited produce and fresh items"},{"id":"LC010","name":"Goodies Mediterranean Market","address":"13721 Lake City Way NE, Seattle, WA 98125","coordinates":[-122.29453682939305,47.730119569138076],"usda_category":{"code":"SG","name":"Small Grocery","source":"USDA SNAP Retailer Store Type Definitions (2025)"},"has_pharmacy":false,"status":"open","is_potential_site":false,"closed_date":null,"notes":"Specialty Mediterranean grocery store"},{"id":"LC011","name":"Kilimanjaro Market","address":"12714 Lake City Way NE, Seattle, WA 98125","coordinates":[-122.29354977657114,47.721949886293984],"usda_category":{"code":"SG","name":"Small Grocery","source":"USDA SNAP Retailer Store Type Definitions (2025)"},"has_pharmacy":false,"status":"open","is_potential_site":false,"closed_date":null,"notes":"Small independent grocer; limited produce and fresh items"},{"id":"LC012","name":"Nazreth Market","address":"12322 Lake City Way NE, Seattle, WA 98125","coordinates":[-122.29372143794382,47.718716301042605],"usda_category":{"code":"SG","name":"Small Grocery","source":"USDA SNAP Retailer Store Type Definitions (2025)"},"has_pharmacy":false,"status":"open","is_potential_site":false,"closed_date":null,"notes":"Small independent grocer; limited produce and fresh items"},{"id":"LC013","name":"Lake City Library","address":"12501 28th Ave NE, Seattle, WA 98125","coordinates":[-122.297,47.7208],"usda_category":{"code":"N/A","name":"Potential Site","source":"Community Planning"},"has_pharmacy":false,"status":"potential","is_potential_site":true,"closed_date":null,"notes":"Public library with community meeting spaces"},{"id":"LC014","name":"Neighborcare Health Center","address":"12721 30th Ave NE, Seattle, WA 98125","coordinates":[-122.295,47.72],"usda_category":{"code":"N/A","name":"Potential Site","source":"Community Planning"},"has_pharmacy":false,"status":"potential","is_potential_site":true,"closed_date":null,"notes":"Community health center for integrated pharmacy services"},{"id":"LC015","name":"North Seattle Public Health Dental","address":"12359 Lake City Way NE, Seattle, WA 98125","coordinates":[-122.29482301465367,47.71912903122116],"usda_category":{"code":"N/A","name":"Potential Site","source":"Community Planning"},"has_pharmacy":true,"status":"potential","is_potential_site":true,"closed_date":null,"notes":"Public health dental clinic with pharmacy potential"},{"id":"LC016","name":"Former Bartell Drugs Building","address":"3018 NE 125th St, Seattle, WA 98125","coordinates":[-122.298,47.722],"usda_category":{"code":"N/A","name":"Potential Site","source":"Community Planning"},"has_pharmacy":true,"status":"potential","is_potential_site":true,"closed_date":null,"notes":"Former pharmacy building, ideal for pharmacy services"},{"id":"LC017","name":"Former Bank Site","address":"2825 NE 125th St, Seattle, WA 98125","coordinates":[-122.29482301465367,47.71912903122116],"usda_category":{"code":"N/A","name":"Potential Site","source":"Community Planning"},"has_pharmacy":true,"status":"potential","is_potential_site":true,"closed_date":null,"notes":"Former bank building suitable for pharmacy conversion"},{"id":"LC018","name":"Bartell Drugs (Lake City)","address":"3018 NE 125th St, Seattle, WA 98125","coordinates":[-122.2956250619695,47.71968596554774],"usda_category":{"code":"PH","name":"Pharmacy","source":"USDA SNAP Retailer Store Type Definitions (2025)"},"has_pharmacy":true,"status":"closed","is_potential_site":false,"closed_date":"2023","notes":"Closed pharmacy location"},{"id":"LC019","name":"Walgreens (Lake City Way)","address":"14352 Lake City Way NE, Seattle, WA 98125","coordinates":[-122.29194719450025,47.73363925901361],"usda_category":{"code":"PH","name":"Pharmacy","source":"USDA SNAP Retailer Store Type Definitions (2025)"},"has_pharmacy":true,"status":"closed","is_potential_site":false,"closed_date":"2024","notes":"Closed pharmacy location"},{"id":"LC020","name":"Target (Northgate)","address":"302 NE Northgate Way, Seattle, WA 98125","coordinates":[-122.32497614494788,47.70890478849319],"usda_category":{"code":"LG","name":"Large Grocery","source":"USDA SNAP Retailer Store Type Definitions (2025)"},"has_pharmacy":true,"status":"open","is_potential_site":false,"notes":"Large grocery store with pharmacy services"}]}'),E=JSON.parse('{"type":"FeatureCollection","features":[]}');function M(){let[e,t]=(0,o.useState)(null),[r,a]=(0,o.useState)(!0),[s,i]=(0,o.useState)(null),[l,c]=(0,o.useState)(!1),[d,u]=(0,o.useState)(null),[p,m]=(0,o.useState)(0);(0,o.useRef)(null);let[y,f]=(0,o.useState)({supermarkets:!0,large_groceries:!0,small_groceries:!1,corner_stores:!1,pharmacies:!0,farmers_markets:!1,potential_library:!1,potential_neighborcare:!1,potential_health_dental:!1,potential_bartell:!1,potential_bank:!1,closed_fred_meyer:!1,closed_bartell:!1,closed_walgreens:!1,half_mile_radius:!1,one_mile_radius:!1,walking_10_min:!0,walking_15_min:!1}),[g,_]=(0,o.useState)(!1);(0,o.useEffect)(()=>{x()},[]);let b=(0,o.useMemo)(()=>({coordinates:W,siteDetails:F,radiusPolygons:E.features||E}),[]),x=(0,o.useCallback)(async()=>{try{let{coordinates:e,siteDetails:t,radiusPolygons:r}=b;N(e,t,r),S()}catch(e){console.error("Failed to load Lake City data:",e),i(e instanceof Error?e.message:"Failed to load Lake City data"),a(!1)}},[b]),N=(0,o.useCallback)((e,r,s)=>{t({type:"FeatureCollection",features:e.features.map(e=>{var t,a,n,o,i;let l=r.sites.find(t=>t.id===e.properties.id),c=s.filter(t=>t.properties.site_id===e.properties.id),d={half_mile:c.find(e=>"half_mile"===e.properties.radius_type),one_mile:c.find(e=>"one_mile"===e.properties.radius_type)};return{...e,properties:{...e.properties,...l,services:{grocery:(null==l?void 0:null===(t=l.usda_category)||void 0===t?void 0:t.code)==="SM"||(null==l?void 0:null===(a=l.usda_category)||void 0===a?void 0:a.code)==="LG"||(null==l?void 0:null===(n=l.usda_category)||void 0===n?void 0:n.code)==="SG"||(null==l?void 0:null===(o=l.usda_category)||void 0===o?void 0:o.code)==="CS",pharmacy:(null==l?void 0:l.has_pharmacy)||!1,farmers_market:(null==l?void 0:null===(i=l.usda_category)||void 0===i?void 0:i.code)==="FM",potential_site:(null==l?void 0:l.is_potential_site)||!1},service_areas:{walking:{"10_min":null,"15_min":null},radius:d}}}})}),a(!1)},[]),S=(0,o.useCallback)(async()=>{c(!0);try{let e=await fetch("/data/lakecity_walkability_polygons_optimized.json");if(!e.ok)throw Error("Failed to load walkability data: ".concat(e.status));let r=await e.json(),a=r.features||r;console.log("Walkability data loaded:",a.length,"polygons"),t(e=>{if(!e)return e;let t=e.features.map(e=>{let t=a.filter(t=>t.properties.site_id===e.properties.id),r={"10_min":t.find(e=>"10_min"===e.properties.walkability_type),"15_min":t.find(e=>"15_min"===e.properties.walkability_type)};return{...e,properties:{...e.properties,service_areas:{...e.properties.service_areas,walking:r}}}});return{...e,features:t}}),c(!1)}catch(e){console.warn("Walkability data failed to load:",e),c(!1)}},[]),k=(0,o.useCallback)(()=>{console.log("Map ready successfully")},[]);(0,o.useCallback)(()=>{m(e=>e+1)},[]);let j=e=>{let{usda_category:t,status:r}=e.properties;if("closed"===r)return"#dc2626";if("potential"===r)return"#f59e0b";if(null==t?void 0:t.code)switch(t.code){case"SM":return"#059669";case"LG":return"#10b981";case"SG":return"#84cc16";case"CS":return"#eab308";case"PH":return"#7c3aed";case"FM":return"#22c55e"}return"#6b7280"},M=(e,t,r)=>{let a="closed"===e?6:8;return t&&(null==r?void 0:r.code)==="SM"&&(a+=2),a},D=e=>{let{name:t,address:r,usda_category:a,status:s,notes:n,fas_score:o,has_pharmacy:i}=e.properties,l=R(a,i);return"\n      <div>\n        <strong>".concat(t,"</strong><br/>\n        <strong>Category:</strong> ").concat(l,"<br/>\n        <strong>Status:</strong> ").concat(s,"<br/>\n        <strong>Address:</strong> ").concat(r,"<br/>\n        ").concat((null==a?void 0:a.source)?"<strong>Source:</strong> ".concat(a.source,"<br/>"):"","\n        ").concat(n?"<strong>Notes:</strong> ".concat(n,"<br/>"):"","\n        ").concat(i&&(null==a?void 0:a.code)==="SM"?"<strong>Services:</strong> Grocery + Pharmacy<br/>":"","\n        ").concat((null==o?void 0:o.overall_score)?"<strong>Fresh Access Score:</strong> ".concat(o.overall_score,"/10<br/>"):"","\n        ").concat((null==o?void 0:o.last_audit)?"<strong>Last Audit:</strong> ".concat(o.last_audit):"","\n      </div>\n    ")},G=e=>{f(t=>({...t,[e]:!t[e]}))};if(r)return(0,n.jsx)("div",{className:"flex items-center justify-center h-screen bg-gray-100",children:(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"}),(0,n.jsx)("p",{className:"text-gray-600",children:"Loading map..."})]})});if(s)return(0,n.jsx)("div",{className:"flex items-center justify-center h-screen bg-red-100",children:(0,n.jsxs)("div",{className:"text-center text-red-700",children:[(0,n.jsx)("p",{className:"font-bold",children:"Error:"}),(0,n.jsx)("p",{children:s})]})});if(!e)return null;let R=(e,t)=>{if(!(null==e?void 0:e.code))return"Unknown";switch(e.code){case"SM":return t?"Supermarket (in-store pharmacy)":"Supermarket";case"LG":return"Large Grocery";case"SG":return"Small Grocery";case"CS":return"Corner Store";case"PH":return"Pharmacy";case"FM":return"Farmers Market";default:return"Unknown"}},O=e.features.filter(e=>{let{usda_category:t,status:r,name:a,services:s,has_pharmacy:n}=e.properties;if("closed"===r)return a.includes("Fred Meyer")?y.closed_fred_meyer:a.includes("Bartell")&&!a.includes("Former")?y.closed_bartell:!!a.includes("Walgreens")&&!a.includes("Former")&&y.closed_walgreens;if("potential"===r||(null==s?void 0:s.potential_site))return a.includes("Library")?y.potential_library:a.includes("Neighborcare")?y.potential_neighborcare:a.includes("Public Health Dental")?y.potential_health_dental:a.includes("Former Bartell")?y.potential_bartell:!!a.includes("Former Bank")&&y.potential_bank;if((null==t?void 0:t.code)==="SM")return!y.supermarkets&&y.pharmacies?!0===n:y.supermarkets;if((null==t?void 0:t.code)==="PH")return y.pharmacies;if(null==t?void 0:t.code)switch(t.code){case"LG":return y.large_groceries;case"SG":return y.small_groceries;case"CS":return y.corner_stores;case"FM":return y.farmers_markets}return!1});return(0,n.jsxs)("div",{className:"h-screen flex flex-col md:flex-row",children:[(0,n.jsxs)("div",{className:"flex-1 relative",children:[(0,n.jsx)("button",{onClick:()=>_(!g),className:"md:hidden absolute top-4 right-4 z-[1000] bg-white shadow-lg rounded-lg p-2 border",children:(0,n.jsx)("span",{className:"text-lg font-semibold",children:g?"✕":"☰"})}),l&&(0,n.jsx)("div",{className:"absolute top-4 left-4 z-[1000] bg-white shadow-lg rounded-lg p-3 border",children:(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-500"}),(0,n.jsx)("span",{className:"text-sm text-gray-600",children:"Loading walkability data..."})]})}),(0,n.jsxs)(h,{center:[47.72,-122.3],zoom:13,className:"h-full w-full",whenReady:k,children:[(0,n.jsx)(v,{attribution:'\xa9 <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),O.map((e,t)=>{let[r,a]=e.properties.coordinates,s=j(e),o=M(e.properties.status,e.properties.has_pharmacy,e.properties.usda_category),{name:i,usda_category:l,has_pharmacy:c}=e.properties;R(l,c);let p=i.split(" ")[0],m=d===e.properties.id;return(0,n.jsxs)(C,{center:[a,r],radius:o,pathOptions:{color:s,fillColor:s,fillOpacity:1,weight:m?4:2,opacity:1,interactive:!0},eventHandlers:{mouseover:e=>{e.target.setStyle({weight:3,opacity:1,zIndex:1e3}),e.target.bringToFront()},mouseout:e=>{e.target.setStyle({weight:m?4:2,opacity:1})},click:t=>{t.originalEvent.stopPropagation(),d===e.properties.id?u(null):u(e.properties.id)}},children:[(0,n.jsx)(w,{direction:"top",offset:[0,-10],opacity:1,permanent:!1,interactive:!1,className:"store-tooltip",children:p}),m&&(0,n.jsx)(A,{closeButton:!1,autoPan:!0,className:"store-popup",children:(0,n.jsx)("div",{dangerouslySetInnerHTML:{__html:D(e)}})})]},t)}),(y.half_mile_radius||y.one_mile_radius)&&O.filter(e=>"open"===e.properties.status||"potential"===e.properties.status||"closed"===e.properties.status).map((e,t)=>{var r,a;let s=e.properties.service_areas,[o,i]=e.properties.coordinates;return(0,n.jsxs)("div",{children:[y.half_mile_radius&&((null==s?void 0:null===(r=s.radius)||void 0===r?void 0:r.half_mile)&&s.radius.half_mile.geometry.coordinates[0].length>4?(0,n.jsx)(L,{positions:s.radius.half_mile.geometry.coordinates[0].map(e=>[e[1],e[0]]),pathOptions:{color:"#10b981",weight:3,opacity:.8,fillColor:"#10b981",fillOpacity:.2,dashArray:"5, 5",interactive:!1},children:(0,n.jsxs)(w,{direction:"center",opacity:.9,className:"polygon-tooltip",children:[e.properties.name," - 1/2 Mile Radius"]})}):(0,n.jsx)(P,{center:[i,o],radius:804.67,pathOptions:{color:"#10b981",weight:3,opacity:.8,fillColor:"#10b981",fillOpacity:.2,dashArray:"5, 5",interactive:!1},children:(0,n.jsxs)(w,{direction:"center",opacity:.9,className:"polygon-tooltip",children:[e.properties.name," - 1/2 Mile Radius"]})})),y.one_mile_radius&&((null==s?void 0:null===(a=s.radius)||void 0===a?void 0:a.one_mile)&&s.radius.one_mile.geometry.coordinates[0].length>4?(0,n.jsx)(L,{positions:s.radius.one_mile.geometry.coordinates[0].map(e=>[e[1],e[0]]),pathOptions:{color:"#3b82f6",weight:3,opacity:.8,fillColor:"#3b82f6",fillOpacity:.15,dashArray:"10, 5",interactive:!1},children:(0,n.jsxs)(w,{direction:"center",opacity:.9,className:"polygon-tooltip",children:[e.properties.name," - 1 Mile Radius"]})}):(0,n.jsx)(P,{center:[i,o],radius:1609.34,pathOptions:{color:"#3b82f6",weight:3,opacity:.8,fillColor:"#3b82f6",fillOpacity:.15,dashArray:"10, 5",interactive:!1},children:(0,n.jsxs)(w,{direction:"center",opacity:.9,className:"polygon-tooltip",children:[e.properties.name," - 1 Mile Radius"]})}))]},"radius-".concat(t))}),(y.walking_10_min||y.walking_15_min)&&O.filter(e=>"open"===e.properties.status||"potential"===e.properties.status||"closed"===e.properties.status).map((e,t)=>{var r;let a=null===(r=e.properties.service_areas)||void 0===r?void 0:r.walking,[s,o]=e.properties.coordinates;return(0,n.jsxs)("div",{children:[y.walking_10_min&&((null==a?void 0:a["10_min"])&&a["10_min"].geometry.coordinates[0].length>4?(0,n.jsx)(L,{positions:a["10_min"].geometry.coordinates[0].map(e=>[e[1],e[0]]),pathOptions:{color:"#10b981",weight:3,opacity:.8,fillColor:"#10b981",fillOpacity:.2,interactive:!1},children:(0,n.jsxs)(w,{direction:"center",opacity:.9,className:"polygon-tooltip",children:[e.properties.name," - 10-min walk"]})}):(0,n.jsx)(P,{center:[o,s],radius:805,pathOptions:{color:"#10b981",weight:3,opacity:.8,fillColor:"#10b981",fillOpacity:.2,interactive:!1},children:(0,n.jsxs)(w,{direction:"center",opacity:.9,className:"polygon-tooltip",children:[e.properties.name," - 10-min walk"]})})),y.walking_15_min&&((null==a?void 0:a["15_min"])&&a["15_min"].geometry.coordinates[0].length>4?(0,n.jsx)(L,{positions:a["15_min"].geometry.coordinates[0].map(e=>[e[1],e[0]]),pathOptions:{color:"#3b82f6",weight:3,opacity:.8,fillColor:"#3b82f6",fillOpacity:.2},children:(0,n.jsxs)(w,{direction:"center",opacity:.9,className:"polygon-tooltip",children:[e.properties.name," - 15-min walk"]})}):(0,n.jsx)(P,{center:[o,s],radius:1207,pathOptions:{color:"#3b82f6",weight:3,opacity:.8,fillColor:"#3b82f6",fillOpacity:.2},children:(0,n.jsxs)(w,{direction:"center",opacity:.9,className:"polygon-tooltip",children:[e.properties.name," - 15-min walk"]})}))]},"walking-".concat(e.properties.name,"-").concat(t))})]},"lake-city-map-".concat(p))]}),(0,n.jsxs)("div",{className:"w-full md:w-80 bg-white shadow-lg flex flex-col ".concat(g?"block":"hidden md:flex"),children:[(0,n.jsx)("div",{className:"sticky top-0 bg-white border-b p-4 z-10",children:(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)("h3",{className:"text-lg font-semibold",children:"Resource Access Key"}),(0,n.jsx)("button",{onClick:()=>_(!1),className:"md:hidden text-gray-500 hover:text-gray-700",children:"✕"})]})}),(0,n.jsxs)("div",{className:"flex-1 overflow-y-auto p-4",children:[(0,n.jsx)("div",{className:"mb-6",children:(0,n.jsxs)("div",{className:"p-3 bg-gray-50 rounded-lg space-y-2 text-sm",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{className:"w-3 h-3 bg-green-600 rounded-full inline-block mr-2"}),(0,n.jsx)("strong",{children:"SM (Supermarket):"})," Full-service supermarket with butcher, bakery, pharmacy"]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{className:"w-3 h-3 bg-green-500 rounded-full inline-block mr-2"}),(0,n.jsx)("strong",{children:"LG (Large Grocery):"})," Large grocery store with good fresh food selection"]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{className:"w-3 h-3 bg-lime-500 rounded-full inline-block mr-2"}),(0,n.jsx)("strong",{children:"SG (Small Grocery):"})," Small independent grocer with limited selection"]}),(0,n.jsx)("div",{className:"ml-5 text-xs text-gray-600 italic",children:"Note: Grocery Outlet's business model places it in the Small Grocery (SG) category. Despite its physical size, its closeout sourcing and variable fresh food selection mean it doesn't function as a full Large Grocery (LG) anchor store."}),(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{className:"w-3 h-3 bg-yellow-500 rounded-full inline-block mr-2"}),(0,n.jsx)("strong",{children:"CS (Corner Store):"})," Convenience store with limited fresh food"]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{className:"w-3 h-3 bg-purple-600 rounded-full inline-block mr-2"}),(0,n.jsx)("strong",{children:"PH (Pharmacy):"})," Pharmacy with prescription services"]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{className:"w-3 h-3 bg-green-400 rounded-full inline-block mr-2"}),(0,n.jsx)("strong",{children:"FM (Farmers Market):"})," Seasonal market with fresh local produce"]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{className:"w-3 h-3 bg-red-600 rounded-full inline-block mr-2"}),(0,n.jsx)("strong",{children:"Closed:"})," Recently closed grocery and pharmacy locations"]}),(0,n.jsx)("p",{className:"mt-2 text-xs text-gray-500",children:(0,n.jsxs)("em",{children:["Grocery Store Categories based on ",(0,n.jsx)("a",{href:"https://www.fns.usda.gov/snap/store-definitions#:~:text=Establishments%20commonly%20known%20as%20supermarkets,products%20in%20warehouse%2Dtype%20environment.",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 underline",children:"USDA SNAP Retailer Store Type Definitions (2025)"})]})}),(0,n.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:(0,n.jsxs)("em",{children:["Radius is distance and walk is based on walk times from our API mapper. ",(0,n.jsx)("a",{href:"https://radiusmapper.com/walking",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 underline",children:"Walkability access map generated using RadiusMapper API with walking routes"})]})})]})}),(0,n.jsxs)("div",{className:"mb-6",children:[(0,n.jsx)("h4",{className:"font-semibold mb-3",children:"Store Types"}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsxs)("label",{className:"flex items-center",children:[(0,n.jsx)("input",{type:"checkbox",checked:y.supermarkets,onChange:()=>G("supermarkets"),className:"mr-2"}),(0,n.jsx)("span",{className:"w-3 h-3 bg-green-600 rounded-full mr-2"}),"Supermarkets (SM)"]}),(0,n.jsxs)("label",{className:"flex items-center",children:[(0,n.jsx)("input",{type:"checkbox",checked:y.large_groceries,onChange:()=>G("large_groceries"),className:"mr-2"}),(0,n.jsx)("span",{className:"w-3 h-3 bg-green-500 rounded-full mr-2"}),"Large Groceries (LG)"]}),(0,n.jsxs)("label",{className:"flex items-center",children:[(0,n.jsx)("input",{type:"checkbox",checked:y.small_groceries,onChange:()=>G("small_groceries"),className:"mr-2"}),(0,n.jsx)("span",{className:"w-3 h-3 bg-lime-500 rounded-full mr-2"}),"Small Groceries (SG)"]}),(0,n.jsxs)("label",{className:"flex items-center",children:[(0,n.jsx)("input",{type:"checkbox",checked:y.corner_stores,onChange:()=>G("corner_stores"),className:"mr-2"}),(0,n.jsx)("span",{className:"w-3 h-3 bg-yellow-500 rounded-full mr-2"}),"Corner Stores (CS)"]}),(0,n.jsxs)("label",{className:"flex items-center",children:[(0,n.jsx)("input",{type:"checkbox",checked:y.pharmacies,onChange:()=>G("pharmacies"),className:"mr-2"}),(0,n.jsx)("span",{className:"w-3 h-3 bg-purple-600 rounded-full mr-2"}),"Pharmacies (PH)"]}),(0,n.jsxs)("label",{className:"flex items-center",children:[(0,n.jsx)("input",{type:"checkbox",checked:y.farmers_markets,onChange:()=>G("farmers_markets"),className:"mr-2"}),(0,n.jsx)("span",{className:"w-3 h-3 bg-green-400 rounded-full mr-2"}),"Farmers Markets (FM)"]})]})]}),(0,n.jsxs)("div",{className:"mb-6",children:[(0,n.jsx)("h4",{className:"font-semibold mb-3",children:"Potential Interim Pharmacy Sites"}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsxs)("label",{className:"flex items-center",children:[(0,n.jsx)("input",{type:"checkbox",checked:y.potential_library,onChange:()=>G("potential_library"),className:"mr-2"}),(0,n.jsx)("span",{className:"w-3 h-3 bg-orange-500 rounded-full mr-2"}),"Lake City Library"]}),(0,n.jsxs)("label",{className:"flex items-center",children:[(0,n.jsx)("input",{type:"checkbox",checked:y.potential_neighborcare,onChange:()=>G("potential_neighborcare"),className:"mr-2"}),(0,n.jsx)("span",{className:"w-3 h-3 bg-orange-500 rounded-full mr-2"}),"Neighborcare Health Center"]}),(0,n.jsxs)("label",{className:"flex items-center",children:[(0,n.jsx)("input",{type:"checkbox",checked:y.potential_health_dental,onChange:()=>G("potential_health_dental"),className:"mr-2"}),(0,n.jsx)("span",{className:"w-3 h-3 bg-orange-500 rounded-full mr-2"}),"North Seattle Public Health Dental"]}),(0,n.jsxs)("label",{className:"flex items-center",children:[(0,n.jsx)("input",{type:"checkbox",checked:y.potential_bartell,onChange:()=>G("potential_bartell"),className:"mr-2"}),(0,n.jsx)("span",{className:"w-3 h-3 bg-orange-500 rounded-full mr-2"}),"Former Bartell Drugs Building"]}),(0,n.jsxs)("label",{className:"flex items-center",children:[(0,n.jsx)("input",{type:"checkbox",checked:y.potential_bank,onChange:()=>G("potential_bank"),className:"mr-2"}),(0,n.jsx)("span",{className:"w-3 h-3 bg-orange-500 rounded-full mr-2"}),"Former Bank Site"]})]})]}),(0,n.jsxs)("div",{className:"mb-6",children:[(0,n.jsx)("h4",{className:"font-semibold mb-3",children:"Closed Stores (2023-2025)"}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsxs)("label",{className:"flex items-center",children:[(0,n.jsx)("input",{type:"checkbox",checked:y.closed_fred_meyer,onChange:()=>G("closed_fred_meyer"),className:"mr-2"}),(0,n.jsx)("span",{className:"w-3 h-3 bg-red-600 rounded-full mr-2"}),"Fred Meyer (Supermarket)"]}),(0,n.jsxs)("label",{className:"flex items-center",children:[(0,n.jsx)("input",{type:"checkbox",checked:y.closed_bartell,onChange:()=>G("closed_bartell"),className:"mr-2"}),(0,n.jsx)("span",{className:"w-3 h-3 bg-red-600 rounded-full mr-2"}),"Bartell Drugs (Pharmacy)"]}),(0,n.jsxs)("label",{className:"flex items-center",children:[(0,n.jsx)("input",{type:"checkbox",checked:y.closed_walgreens,onChange:()=>G("closed_walgreens"),className:"mr-2"}),(0,n.jsx)("span",{className:"w-3 h-3 bg-red-600 rounded-full mr-2"}),"Walgreens (Pharmacy)"]})]})]}),(0,n.jsxs)("div",{className:"mb-6",children:[(0,n.jsx)("h4",{className:"font-semibold mb-3",children:"Service Areas"}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsxs)("label",{className:"flex items-center",children:[(0,n.jsx)("input",{type:"checkbox",checked:y.half_mile_radius,onChange:()=>G("half_mile_radius"),className:"mr-2"}),(0,n.jsx)("span",{className:"w-3 h-3 border-2 border-green-500 border-dashed mr-2"}),"1/2 Mile Radius"]}),(0,n.jsxs)("label",{className:"flex items-center",children:[(0,n.jsx)("input",{type:"checkbox",checked:y.one_mile_radius,onChange:()=>G("one_mile_radius"),className:"mr-2"}),(0,n.jsx)("span",{className:"w-3 h-3 border-2 border-blue-500 border-dashed mr-2"}),"1 Mile Radius"]}),(0,n.jsxs)("label",{className:"flex items-center",children:[(0,n.jsx)("input",{type:"checkbox",checked:y.walking_10_min,onChange:()=>G("walking_10_min"),className:"mr-2"}),(0,n.jsx)("span",{className:"w-3 h-3 border-2 border-green-500 mr-2"}),"10-Minute Walk"]}),(0,n.jsxs)("label",{className:"flex items-center",children:[(0,n.jsx)("input",{type:"checkbox",checked:y.walking_15_min,onChange:()=>G("walking_15_min"),className:"mr-2"}),(0,n.jsx)("span",{className:"w-3 h-3 border-2 border-blue-500 mr-2"}),"15-Minute Walk"]})]})]})]})]})]})}delete l().Icon.Default.prototype._getIconUrl,l().Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png"})},5046:function(){}}]);